<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Syntax-highlighting in web pages</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Syntax-highlighting in web pages</h2>
<p class="meta">29 Jul 2008</p>

<div class="post">
I've recently moved my blog to <a href="http://blog.higher-order.net">http://blog.higher-order.net</a>. In this transition I used Wordpress' feature of importing blog content from my old blog: <a href="http://higher-order.blogspot.com">higher-order.blogspot.com</a>. Unfortunately all the line-breaks from the pre-formatted JavaScript source code disappeared in the process, and so, I will have to insert it manually.

This whole process reminded me that I would really prefer to have syntax-highlighting for code-sniplets in the blog. A little bit of searching lead to <a href="http://www.gnu.org/software/src-highlite/">GNU Source-highlight</a>. After a little fight with the make system, I managed to install it on Mac OS X -- it is looks really neat (even in the default style), and it's simple to use. 

However, the main reason I'm using this tool is not presentation: When writing the source code presentation manually in HTML one has to remember to escape characters like &lt;. This means that the transformed source (i.e. the HTML-fragment) is no longer a syntactically correct program in the programming language of the code-snipplet, which means we can't just paste it into an interpreter to check if it works. Sometimes this leads to people posting code which isn't even syntactically valid... If you instead maintain a file which holds the syntactically correct source code (and using a smart editor you will immediately see stupid syntax errors instead of having blog-readers find those errors). You can then compile the source code to HTML using the Source-highlight tool. This is significantly less error prone, and the quality improves.

Here is the namespace function from <a href="http://blog.higher-order.net/2008/02/18/designing-clientserver-web-applications/">a previous post</a>.
<pre><tt><span class="keyword">function</span><span class="normal"> </span><span class="function">namespace</span><span class="symbol">(</span><span class="normal">spec</span><span class="symbol">,</span><span class="normal">context</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">   </span><span class="keyword">var</span><span class="normal"> validIdentifier </span><span class="symbol">=</span><span class="normal"> </span><span class="regexp">/^(?:[a-zA-Z_]\w*[.])*[a-zA-Z_]\w*$/</span><span class="symbol">,</span>
<span class="normal">       i</span><span class="symbol">,</span><span class="normal">N</span><span class="symbol">;</span>
<span class="normal">   context </span><span class="symbol">=</span><span class="normal"> context </span><span class="symbol">||</span><span class="normal"> window</span><span class="symbol">;</span>
<span class="normal">   spec </span><span class="symbol">=</span><span class="normal"> spec</span><span class="symbol">.</span><span class="function">valueOf</span><span class="symbol">();</span>
<span class="normal">   </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="keyword">typeof</span><span class="normal"> spec </span><span class="symbol">===</span><span class="normal"> </span><span class="string">'object'</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">      </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="keyword">typeof</span><span class="normal"> spec</span><span class="symbol">.</span><span class="normal">length </span><span class="symbol">===</span><span class="normal"> </span><span class="string">'number'</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="comment">//assume an array-like object</span>
<span class="normal">         </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">i</span><span class="symbol">=</span><span class="number">0</span><span class="symbol">,</span><span class="normal">N</span><span class="symbol">=</span><span class="normal">spec</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal">i</span><span class="symbol">&lt;</span><span class="normal">N</span><span class="symbol">;</span><span class="normal">i</span><span class="symbol">++)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">             </span><span class="function">namespace</span><span class="symbol">(</span><span class="normal">spec</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal">context</span><span class="symbol">);</span>
<span class="normal">         </span><span class="cbracket">}</span>
<span class="normal">      </span><span class="cbracket">}</span>
<span class="normal">      </span><span class="keyword">else</span><span class="normal"> </span><span class="cbracket">{</span><span class="comment">//spec is a specification object e.g, {com: {trifork: ['model,view']}}</span>
<span class="normal">         </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">i </span><span class="keyword">in</span><span class="normal"> spec</span><span class="symbol">)</span><span class="normal"> </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">spec</span><span class="symbol">.</span><span class="function">hasOwnProperty</span><span class="symbol">(</span><span class="normal">i</span><span class="symbol">))</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            context</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]</span><span class="normal"> </span><span class="symbol">=</span><span class="normal"> context</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> </span><span class="cbracket">{}</span><span class="symbol">;</span>
<span class="normal">            </span><span class="function">namespace</span><span class="symbol">(</span><span class="normal">spec</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">],</span><span class="normal"> context</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">]);</span><span class="comment">//recursively descend tree</span>
<span class="normal">         </span><span class="cbracket">}</span>
<span class="normal">      </span><span class="cbracket">}</span>
<span class="normal">   </span><span class="cbracket">}</span><span class="normal"> </span><span class="keyword">else</span><span class="normal"> </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="keyword">typeof</span><span class="normal"> spec </span><span class="symbol">===</span><span class="normal"> </span><span class="string">'string'</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">          </span><span class="symbol">(</span><span class="keyword">function</span><span class="normal"> </span><span class="function">handleStringCase</span><span class="symbol">()</span><span class="cbracket">{</span>
<span class="normal">              </span><span class="keyword">var</span><span class="normal"> parts</span><span class="symbol">;</span>
<span class="normal">              </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(!</span><span class="normal">validIdentifier</span><span class="symbol">.</span><span class="function">test</span><span class="symbol">(</span><span class="normal">spec</span><span class="symbol">))</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">Error</span><span class="symbol">(</span><span class="string">'"'</span><span class="symbol">+</span><span class="normal">spec</span><span class="symbol">+</span><span class="string">'" is not a valid name for a package.'</span><span class="symbol">);</span>
<span class="normal">              </span><span class="cbracket">}</span>
<span class="normal">              parts </span><span class="symbol">=</span><span class="normal"> spec</span><span class="symbol">.</span><span class="function">split</span><span class="symbol">(</span><span class="string">'.'</span><span class="symbol">);</span>
<span class="normal">              </span><span class="keyword">for</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">i</span><span class="symbol">=</span><span class="number">0</span><span class="symbol">,</span><span class="normal">N</span><span class="symbol">=</span><span class="normal">parts</span><span class="symbol">.</span><span class="normal">length</span><span class="symbol">;</span><span class="normal">i</span><span class="symbol">&lt;</span><span class="normal">N</span><span class="symbol">;</span><span class="normal">i</span><span class="symbol">++)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">                  spec </span><span class="symbol">=</span><span class="normal"> parts</span><span class="symbol">[</span><span class="normal">i</span><span class="symbol">];</span>
<span class="normal">                  context</span><span class="symbol">[</span><span class="normal">spec</span><span class="symbol">]</span><span class="normal"> </span><span class="symbol">=</span><span class="normal"> context</span><span class="symbol">[</span><span class="normal">spec</span><span class="symbol">]</span><span class="normal"> </span><span class="symbol">||</span><span class="normal"> </span><span class="cbracket">{}</span><span class="symbol">;</span>
<span class="normal">                  context </span><span class="symbol">=</span><span class="normal"> context</span><span class="symbol">[</span><span class="normal">spec</span><span class="symbol">];</span>
<span class="normal">              </span><span class="cbracket">}</span>
<span class="normal">           </span><span class="cbracket">}</span><span class="symbol">)();</span>
<span class="normal">    </span><span class="cbracket">}</span><span class="normal">  </span><span class="keyword">else</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">       </span><span class="keyword">throw</span><span class="normal"> </span><span class="keyword">new</span><span class="normal"> </span><span class="function">TypeError</span><span class="symbol">();</span>
<span class="normal">   </span><span class="cbracket">}</span>
<span class="cbracket">}</span></tt></pre> 

</div>


          <div class="footer">
            <div class="contact">
              <p>
                Your Name<br />
                What You Are<br />
                you@example.com
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/yourusername">github.com/yourusername</a><br />
                <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
